<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Calculadora Edson</title>
        
        <!-- Enlace al archivo CSS para estilos -->
        <link rel="stylesheet" href="styles.css">  <!-- Ajustar aquí -->
    </head>    
<body>
    <!-- Título principal de la calculadora -->
    <h1>Calculadora Edson</h1>

    <!-- Comienzo del formulario para las operaciones de la calculadora -->
    <form id="calculadora" action="cgi-bin/calculadora.pl" method="get">
        <div>
            <!-- Pantalla de visualización de la expresión (editable) -->
            <input type="text" id="pantalla" name="expresion" placeholder="Ingresa tu operación aquí" readonly>
        </div>

        <!-- Contenedor de botones de la calculadora -->
        <div id="botones">
            <button type="button" onclick="agregarValor('7')">7</button>
            <button type="button" onclick="agregarValor('8')">8</button>
            <button type="button" onclick="agregarValor('9')">9</button>
            <button type="button" onclick="agregarValor('+')">+</button>
            <button type="button" onclick="agregarValor('4')">4</button>
            <button type="button" onclick="agregarValor('5')">5</button>
            <button type="button" onclick="agregarValor('6')">6</button>
            <button type="button" onclick="agregarValor('-')">-</button>
            <button type="button" onclick="agregarValor('1')">1</button>
            <button type="button" onclick="agregarValor('2')">2</button>
            <button type="button" onclick="agregarValor('3')">3</button>
            <button type="button" onclick="agregarValor('*')">*</button>
            <button type="button" onclick="agregarValor('0')">0</button>
            <button type="button" onclick="agregarValor('/')">/</button>
            <button type="button" onclick="agregarValor('^')">^</button>
            <button type="button" onclick="agregarValor('(')">(</button>
            <button type="button" onclick="agregarValor(')')">)</button>
            <button type="button" onclick="calcular()">Calcular</button>
            <button type="button" onclick="limpiar()">Limpiar</button> <!-- Botón para limpiar la pantalla -->
        </div>
    </form>

    <!-- Script para manejar la entrada del teclado numérico -->
    <script>
        // Función para agregar el valor al display
        function agregarValor(valor) {
            const pantalla = document.getElementById('pantalla');
            pantalla.value += valor;  // Añadir el valor al campo de pantalla
        }

        // Función para limpiar la pantalla
        function limpiar() {
            document.getElementById('pantalla').value = ''; // Limpiar el campo de pantalla
        }

        // Función para calcular y enviar la expresión
        function calcular() {
            document.getElementById('calculadora').submit(); // Enviar el formulario
        }

        // Capturar el evento de teclado
        document.addEventListener('keydown', function(event) {
            const teclasPermitidas = '0123456789+-*/^()'; // Teclas permitidas
            if (teclasPermitidas.includes(event.key)) {
                agregarValor(event.key); // Agregar valor al campo de pantalla
            } else if (event.key === 'Enter') {
                calcular(); // Calcular al presionar Enter
            } else if (event.key === 'Escape') {
                limpiar(); // Limpiar al presionar Escape
            }
        });
    </script>
</body>
</html>